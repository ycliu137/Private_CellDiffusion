# Configuration file for k_mnn and n_edges_per_node hyperparameter optimization pipeline
# Note: n_edges_per_node will be set equal to k_mnn for each test

# datasets: ["Endom314K_GSM4577312_GSM6574543", 
#             "Endom314K_GSM6605435_GSM6605432",
#             "Endom314K_GSM6605435_GSM6605434",
#             "Endom314K_GSM6605436_GSM6605440",
#             "Endom314K_GSM6605437_GSM6605434"]

datasets: ["BMMC_s1d3_s4d9",
            "BMMC_s1d2_s3d1",
            "BMMC_s2d5_s3d7",
            "pbmc10k",]

normalized_data: False
# Data paths
data:
  input_path: "../data/inputs/integration/"
  # Output directory (relative to project root, or use absolute path)
  output_dir: "../data/outputs/hyperp_k_mnn_n_edges"

# Preprocessing parameters
preprocess:
  min_cells: 3
  target_sum: 10000
  n_top_genes: 2000
  min_mean: 0.0125
  max_mean: 9
  min_disp: 0.5

# Feature encoder parameters
feature_encoder:
  D_encode_list: [2000, 300, 50]
  D_decode_list: [50, 300, 2000]
  max_epoch: 2000
  lr: 0.001

# Integration graph parameters
# k_mnn will be varied as a list, and n_edges_per_node will be set equal to k_mnn
integration_graph:
  k_mnn: [10, 20, 30, 40, 50, 60, 70, 80, 90, 100]  # List of k_mnn values to test
  # n_edges_per_node will be set equal to k_mnn in Snakefile

# Integration loss adjacency parameters
integration_loss_adj:
  k: 50

# Integration diffusion parameters (CellDiffusion)
integration_diffusion:
  max_epoch: 2000
  lr: 0.001
  num_features_diffusion: 50
  num_heads_diffusion: 8
  num_steps_diffusion: 8
  time_increment_diffusion: 0.2

# Evaluation parameters
evaluation:
  label_key: "labels"
  batch_key: "batch"

# UMAP visualization parameters
umap:
  n_neighbors: 50
  n_pcs: 50

# Device
device: "cuda"  # or "cpu"

# SCIB evaluation parameters
scib_evaluation:
  n_jobs: 1  # Number of parallel jobs for scib benchmark (1 is recommended for stability)

# Multi-dataset line plot configuration
# Dictionary mapping dataset keys to display names for comparison line plot
line_plot_datasets:
  # "Endom314K_GSM4577312_GSM6574543": "Dataset 1"
  # "Endom314K_GSM6605435_GSM6605432": "Dataset 2"
  # "Endom314K_GSM6605435_GSM6605434": "Dataset 3"
  # "Endom314K_GSM6605436_GSM6605440": "Dataset 4"
  "BMMC_s1d3_s4d9": "BMMC-HT1"
  "BMMC_s1d2_s3d1": "BMMC-HT2"
  "BMMC_s2d5_s3d7": "BMMC-HT3"
  "Endom314K_GSM6605437_GSM6605434": "Endometrium-HT"
  "pbmc10k": "PBMC-10k"

